/* ==========================================================================
   DARK THEME (Source Fixed)
   ========================================================================== */

$d-gray: #7a8288;
$d-bg:   #1a1a1a;
$d-text: #ffffff;
$d-link: #5ab1ff;
$d-link-hover: mix(#fff, $d-link, 20%);
$d-code-bg:    #2a2a2a;

/* 核心修改：支持 html.dark (防闪烁) 和 body.dark (兼容旧逻辑) */
html.dark body, 
body.dark {
    --global-base-color:                #{$d-bg};
    --global-bg-color:                  #{$d-bg};
    --global-border-color:              #333;
    --global-code-background-color:     #{$d-code-bg};
    --global-code-text-color:           #e6e6e6;
    
    --global-text-color:                #{$d-text};
    --global-text-color-light:          #aaa;
    --global-link-color:                #{$d-link};
    --global-link-color-hover:          #{$d-link-hover};
    --global-link-color-visited:        #b08dff;
    
    --global-masthead-link-color:       #{$d-text};
    --global-masthead-link-color-hover: #{$d-link};

    /* 强制样式 */
    color: #{$d-text} !important;
    background-color: #{$d-bg} !important;

    a { color: #{$d-link} !important; }
    a:hover { color: #{$d-link-hover} !important; }
    
    .masthead {
        background: transparent !important;
        border-bottom: none !important;
    }
    .masthead__menu-item a { color: #{$d-text} !important; }

    table { color: #e6e6e6; }
    pre, code {
        background-color: #{$d-code-bg} !important;
        color: #f8f8f2 !important;
        border: 1px solid #444;
    }
    
    h1, h2, h3, h4, h5, h6, .page__title { color: #fff !important; }
    
    input, textarea {
        background: #333;
        color: #fff;
        border: 1px solid #555;
    }
}
