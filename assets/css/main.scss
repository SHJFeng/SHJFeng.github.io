---
---

/*
 * This file controls what is imported from /_sass
 *
 * Note that the files are processed in the order they are imported, so they are partly
   sorted by the dependencies. Also, the first two lines of the file are required by Jekyll.
 */

@import 
    "vendor/breakpoint/breakpoint",

    "themes",
    "theme/{{ site.site_theme | default: 'default' }}",

    "include/mixins",
    "vendor/susy/susy",

    "layout/reset",
    "layout/base",

    "include/utilities",
    "layout/tables",
    "layout/buttons",
    "layout/notices",
    "layout/masthead",
    "layout/navigation",
    "layout/footer",
    "syntax",

    "layout/forms",

    "layout/page",
    "layout/archive",
    "layout/sidebar",
    
    "vendor/font-awesome/fontawesome",
    "vendor/font-awesome/solid",
    "vendor/font-awesome/brands",
    "vendor/magnific-popup/magnific-popup"
;
/* --- 自定义背景设置 Start --- */

/* 1. 设置全屏固定背景图 */
body {
    background-image: url('/images/background.jpg'); /* 确保路径对应你的图片 */
    background-size: cover;       /* 图片铺满全屏 */
    background-position: center;  /* 图片居中 */
    background-attachment: fixed; /* 关键：图片固定，不随滚动条移动 */
    background-repeat: no-repeat;
}

/* 2. 让网页默认的容器背景变透明，否则会挡住图片 */
.page, .page__content, .archive, .author__urls-wrapper {
    background-color: transparent !important; 
    box-shadow: none !important;
}

/* 3. 定义我们想要变色的主容器 */
/* 注意：academicpages 的主内容框通常是 .page__inner-wrap 或者 #main */
#main-content-wrapper {
    /* 初始状态：完全透明或者半透明 */
    background-color: rgba(255, 255, 255, 0); 
    padding: 2em; /* 加点内边距，好看一点 */
    border-radius: 8px; /* 圆角 */
    transition: background-color 0.1s ease-out; /* 让变化丝滑一点 */
    min-height: 100vh;
}

/* 修复侧边栏如果不透明的问题 */
.sidebar {
    background-color: rgba(255, 255, 255, 0.8) !important;
    border-radius: 8px;
    padding: 10px;
}

/* --- 自定义背景设置 End --- */
/* --- 顶部导航栏美化 --- */
.masthead {
    /* 背景改为半透明白色 (0.2 是透明度) */
    background-color: rgba(255, 255, 255, 0.1) !important;
    /* 关键：添加毛玻璃模糊效果 */
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    /* 去掉底部的分割线 */
    border-bottom: none !important;
    /* 让它悬浮在最顶层 */
    position: sticky; 
    top: 0;
    z-index: 999;
}

/* =========================================
   终极修复包：导航栏透明 + 侧边栏位置 + 全局白字
   ========================================= */

/* --- 1. 顶部导航栏 (Masthead) 样式 --- */
.masthead {
    /* 背景改为白色，但透明度只有 20% */
    background-color: rgba(255, 255, 255, 0.2) !important;
    
    /* 强力毛玻璃效果 (模糊背景) */
    backdrop-filter: blur(15px);
    -webkit-backdrop-filter: blur(15px);
    
    /* 去掉底部边框 */
    border-bottom: none !important;
    
    /* 固定在顶部 */
    position: sticky;
    top: 0;
    
    /* 保证它永远在最上面 */
    z-index: 999; 
    
    /* 稍微加个阴影让层次分明 */
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
}

/* --- 2. 导航栏文字颜色 --- */
.masthead__menu-item a {
    color: #ffffff !important; /* 纯白文字 */
    text-shadow: 0 2px 4px rgba(0,0,0,0.8); /* 文字加阴影，防看不清 */
    font-weight: 600; /* 字体加粗 */
}
/* 鼠标悬停时 */
.masthead__menu-item a:hover {
    color: #f2f2f2 !important;
    text-decoration: underline;
}

/* =========================================
   Sidebar 位置终极修正 (Padding 法)
   ========================================= */

/* 1. 强行给侧边栏内容区上方加 120px 的隐形填充 */
/* 这会把 "Shijie Feng" 这个名字直接往下挤，避开导航栏 */
.sidebar__content {
    padding-top: 120px !important; 
    position: relative; /* 确保定位参照正确 */
}

/* 2. 确保侧边栏本身不带背景色，且层级正确 */
.sidebar {
    background-color: transparent !important;
    border: none !important;
    z-index: 10; /* 必须比 Masthead (999) 小 */
    margin-top: 0 !important; /* 防止其他的 margin 干扰 */
}

/* 3. 再次确保名字的样式 */
.author__name {
    margin-top: 20px !important; /* 给名字再多加点额外的呼吸空间 */
    color: #fff !important;
    text-shadow: 0 2px 5px rgba(0,0,0,0.9);
}
/* --- 4. 全局正文文字颜色调整 --- */
body, h1, h2, h3, h4, h5, h6, p, li, a, .sidebar {
    color: #ffffff !important; /* 强制变白 */
}

/* 给全局文字加一层淡淡的阴影，确保在任何背景图上都看清 */
body {
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
}

/* 链接颜色 */
a {
    color: #87ceeb !important; /* 天蓝色链接 */
}
a:hover {
    color: #ffffff !important; /* 悬停变白 */
}
/* --- 侧边栏职业化改造 --- */

/* 1. 去掉侧边栏的白色背景和阴影 */
.sidebar {
    background: transparent !important;
    opacity: 1 !important; /* 保证侧边栏一直清晰，不随中间内容变暗 */
    border: none !important;
}

/* 2. 头像样式优化 */
.author__avatar img {
    border-radius: 10px !important; /* 稍微圆角，不要全圆 */
    border: 2px solid rgba(255,255,255,0.8); /* 加个细白边框显精致 */
    box-shadow: 0 4px 8px rgba(0,0,0,0.5); /* 头像立体感 */
}

/* 3. 侧边栏文字对齐和大小 */
.sidebar .author__name {
    font-size: 1.5em;
    font-weight: 700;
    margin-top: 10px;
    text-shadow: 0 2px 4px black; /* 名字加重阴影 */
}
.sidebar .author__bio {
    font-size: 1em;
    margin-bottom: 20px;
    color: #e0e0e0 !important; /* 简介稍微灰一点，拉开层次 */
}

/* 4. 侧边栏链接列表 (Email, Github等) */
.author__urls-wrapper {
    background: rgba(0, 0, 0, 0.3) !important; /* 给链接区加个极淡的黑底 */
    padding: 10px;
    border-radius: 8px;
}
.author__urls li a {
    color: #ffffff !important;
    border-bottom: 1px solid rgba(255,255,255,0.2);
}
